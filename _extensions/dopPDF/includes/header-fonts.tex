%% https://github.com/baltimorebudget/LaTeX-Templates/blob/main/header.tex
\usepackage{microtype} % improves line breaks, justification
\usepackage{wrapfig} % allows for wrapping text around tables and figures
\usepackage[document]{ragged2e} %% See also https://tex.stackexchange.com/a/696462

%% Use some custom fonts
\setsansfont{Raleway}[
    Path=_extensions/dopPDF/fonts/Raleway/,
    Scale=0.9,
    Extension = .ttf,
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-MediumItalic,
    ]

\setmainfont{Lora}[
    Path=_extensions/dopPDF/fonts/Lora/,
    Scale=0.9,
    Extension = .ttf,
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    ]

% \setmonofont{MonaspaceArgon}[
%     Path=_extensions/dopPDF/fonts/MonaspaceArgon/,
%     Scale=0.8,
%     Extension = .otf,
%     UprightFont=*-Regular,
%     BoldFont=*-SemiBold,
%     ItalicFont=*-Italic,
%     ]

\setmonofont{SourceCodePro}[
    Path=_extensions/dopPDF/fonts/Source_Code_Pro/,
    Scale=0.8,
    Extension = .ttf,
    UprightFont=*-Regular,
    BoldFont=*-SemiBold,
    ItalicFont=*-Italic,
    ]

% \setmonofont{Recursive_Monospace_Casual}[
%     Path=_extensions/dopPDF/fonts/Recursive/,
%     Scale=0.8,
%     Extension = .ttf,
%     UprightFont=*-Regular,
%     BoldFont=*-SemiBold,
%     ]

%% style the chapter/section fonts
\chapterfont{\color{lightblue}\fontsize{24}{16.8}\selectfont}
\sectionfont{\color{darkestblue}\fontsize{26}{16.8}\selectfont}
\subsectionfont{\color{darkblue}\fontsize{20}{2}\selectfont}
\subsubsectionfont{\color{darkestblue}\fontsize{16}{16.8}\selectfont}

%% sans font for all headings
\allsectionsfont{\sffamily}

%% CAPTIONS
%% https://mirrors.mit.edu/CTAN/macros/latex/contrib/caption/caption.pdf
\RequirePackage{caption}
\DeclareCaptionStyle{dopCaption}[justification=RaggedRight]
{
 width=0.8\textwidth,
  font={sf,md},
  labelfont={sf,color=darkgray},
  labelformat=simple,
  textfont={color=darkblue},
  labelsep=period,
  format=hang,
  singlelinecheck=true
}
%% figure captions
\captionsetup[figure]{aboveskip=6pt,style=dopCaption}
%% table captions
\captionsetup[table]{font={tt,bf},labelfont={tt,footnotesize},belowskip=6pt,style=dopCaption}
\captionsetup[longtable]{font={tt,bf},labelfont={tt,footnotesize},belowskip=6pt,style=dopCaption}

\RequirePackage{etoolbox}
%% monotype font for tables
\AtBeginEnvironment{longtable}{\ttfamily}
\AtBeginEnvironment{longtable*}{\ttfamily}

% TODO: Change hanging indent for description list
% https://tex.stackexchange.com/questions/7008/change-hanging-indent-in-description-list
%% enumitem docs: https://ctan.math.illinois.edu/macros/latex/contrib/enumitem/enumitem.pdf
\RequirePackage{enumitem}
% \setlist{noitemsep}
% \setlist[1]{labelindent=\parindent} % < Usually a good idea
\setlist[description,1]
{
  leftmargin=\linewidth / 6,
  itemsep=8pt,
  parsep=6pt,
  % labelwidth=0.5in,
  style=nextline,
  font={\ttfamily\color{darkblue}}
}

\DeclareTOCStyleEntries[
  raggedentrytext,
  linefill=\hfill,
  % numwidth=0.1pt,
  numsep=1ex,
  dynnumwidth
]{tocline}{chapter,section,subsection,subsubsection,paragraph,subparagraph}
\DeclareTOCStyleEntries[
  indent=2pt,
  dynindent
]{tocline}{section,subsection,subsubsection,paragraph,subparagraph}

%% Setting font styles
%% https://mirror.mwt.me/ctan/macros/latex/contrib/koma-script/doc/scrguide-en.pdf
\addtokomafont{partentry}{\large\sffamily\bfseries}
\addtokomafont{partentrypagenumber}{\sffamily\bfseries}
\addtokomafont{chapterentry}{\sffamily\mdseries}
\addtokomafont{chapterentrypagenumber}{\sffamily\bfseries}

%% https://github.com/tudelft3d/terrainbook/blob/75b6207511acf113d293772d3dbc7a8450a2d59b/kao.sty#L836
